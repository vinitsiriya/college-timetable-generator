export type LogoPalette=[string,string,string,string,string];
export const palettePresets: LogoPalette[]=[
 ['#7d1212','#d4a300','#fff9e3','#ffffff','#ffe7a8'],
 ['#1e3a8a','#2563eb','#f1f5ff','#ffffff','#e0edff'],
 ['#6d1e8a','#9333ea','#fbf3ff','#ffffff','#f2e6ff'],
 ['#0d5f47','#10b981','#ecfdf5','#ffffff','#d1fae5'],
 ['#7c2d12','#ea580c','#fff5ed','#ffffff','#ffe7d5'],
 ['#6d0024','#dc145c','#fff1f6','#ffffff','#ffd5e6']
];
export interface AutoLogoParams{institutionName:string;logoVariant?:number;logoBaseColor?:string;logoAccentColor?:string;logoEmbedShield?:boolean;logoBgOuter?:string;logoBgInner?:string;logoBgSecondary?:string;logoLetters?:string;}
export function generateLogo(name:string,variant:number=0,baseOverride?:string,accentOverride?:string,embedShield?:boolean,outerBg?:string,innerBg?:string,secondaryBg?:string,lettersOverride?:string){const words=name.trim().split(/\s+/).filter(Boolean);const initials=(lettersOverride&&lettersOverride.trim())?lettersOverride.trim().toUpperCase():(words.slice(0,3).map(w=>w[0]).join('')||'INST').toUpperCase();const full=name.toUpperCase();const base=baseOverride||'#1e3a8a';const accent=accentOverride||'#2563eb';const gradient=`<linearGradient id='g' x1='0' x2='1' y1='0' y2='1'><stop stop-color='${innerBg||'#ffffff'}' offset='0'/><stop stop-color='${secondaryBg||'#e2edff'}' offset='1'/></linearGradient>`;const estLen=Math.min(full.length,30);const small=estLen>22;const fullSize=small?5:6.2;const shieldCircle=`<g opacity='.28'> <path d='M55 20 L82 32 V56c0 18-11 28-27 36-16-8-27-18-27-36V32z' fill='url(#g)' stroke='${base}' stroke-width='1.6'/> <path d='M55 26 L76 36 V56c0 14-9 22-21 29-12-7-21-15-21-29V36z' fill='none' stroke='${accent}' stroke-width='1.2'/> </g>`;const shieldStandard=`<g opacity='.22'> <path d='M60 6 L102 24 V58c0 30-18 44-42 56-24-12-42-26-42-56V24z' fill='url(#g)' stroke='${base}' stroke-width='2'/> <path d='M60 14 L94 28 V58c0 24-14 36-34 46-20-10-34-22-34-46V28z' fill='none' stroke='${accent}' stroke-width='1.6'/> </g>`;const shieldWide=`<g opacity='.20' transform='translate(10 4) scale(.8)'> <path d='M60 6 L102 24 V58c0 30-18 44-42 56-24-12-42-26-42-56V24z' fill='url(#g)' stroke='${base}' stroke-width='2.4'/> <path d='M60 14 L94 28 V58c0 24-14 36-34 46-20-10-34-22-34-46V28z' fill='none' stroke='${accent}' stroke-width='1.8'/> </g>`;const circularText=(text:string)=>`<defs><path id='circlePath' d='M55 55 m -40 0 a 40 40 0 1 1 80 0 a 40 40 0 1 1 -80 0' /></defs> <text font-size='6' font-family='Poppins,Arial' fill='${base}' letter-spacing='1'> <textPath href='#circlePath' startOffset='50%' text-anchor='middle'>${text}</textPath> </text>`;switch(variant){case 1:return `<svg xmlns='http://www.w3.org/2000/svg' width='110' height='110' viewBox='0 0 110 110'><defs>${gradient}</defs><circle cx='55' cy='55' r='53' fill='${outerBg||'#f1f5ff'}' stroke='${base}' stroke-width='2'/><circle cx='55' cy='55' r='48' fill='url(#g)' stroke='${accent}' stroke-width='1.2'/>${embedShield?shieldCircle:''}<circle cx='55' cy='55' r='44' fill='none' stroke='${accent}' stroke-dasharray='6 5' stroke-width='2'/>${circularText(full)}<text x='50%' y='54%' font-size='30' font-family='Poppins,Arial' fill='${base}' font-weight='600' text-anchor='middle' dominant-baseline='middle'>${initials}</text></svg>`;case 2:return `<svg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'><defs>${gradient}</defs>${embedShield?shieldStandard:''}<path d='M60 6 L102 24 V58c0 30-18 44-42 56-24-12-42-26-42-56V24z' fill='${outerBg||'#f1f5ff'}' stroke='${base}' stroke-width='2'/><path d='M60 14 L102 28 V58c0 26-16 38-42 50-26-12-42-24-42-50V28z' fill='url(#g)' stroke='${accent}' stroke-width='1.2'/><path d='M60 14 L94 28 V58c0 24-14 36-34 46-20-10-34-22-34-46V28z' fill='none' stroke='${accent}' stroke-width='1.5'/><text x='50%' y='54%' font-size='30' font-family='Poppins,Arial' fill='${base}' font-weight='600' text-anchor='middle'>${initials}</text><text x='50%' y='90%' font-size='${fullSize}' font-family='Poppins,Arial' fill='${base}' font-weight='500' text-anchor='middle'>${full}</text></svg>`;case 3:return `<svg xmlns='http://www.w3.org/2000/svg' width='160' height='70' viewBox='0 0 160 70'><defs>${gradient}</defs>${embedShield?shieldWide:''}<rect x='1' y='1' width='158' height='68' rx='14' fill='${outerBg||'#f1f5ff'}' stroke='${base}' stroke-width='2'/><rect x='10' y='10' width='140' height='48' rx='10' fill='url(#g)' stroke='${accent}' stroke-width='1.2'/><rect x='1' y='1' width='12' height='68' rx='14' fill='${accent}' /><text x='30' y='40' font-size='30' font-family='Poppins,Arial' fill='${base}' font-weight='600' dominant-baseline='middle'>${initials}</text><text x='30' y='60' font-size='${fullSize}' font-family='Poppins,Arial' fill='${base}' font-weight='500'>${full}</text></svg>`;case 4:return `<svg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'><defs>${gradient}</defs>${embedShield?shieldStandard:''}<circle cx='60' cy='60' r='58' fill='${outerBg||'#f1f5ff'}' stroke='${base}' stroke-width='2'/><circle cx='60' cy='60' r='52' fill='url(#g)' stroke='${accent}' stroke-width='1.2'/><g stroke='${accent}' stroke-width='3' stroke-linecap='round'><line x1='32' y1='78' x2='32' y2='42'/><line x1='88' y1='78' x2='88' y2='42'/><line x1='60' y1='84' x2='60' y2='36'/></g><text x='50%' y='50%' font-size='28' font-family='Poppins,Arial' fill='${base}' font-weight='600' text-anchor='middle' dominant-baseline='middle'>${initials}</text><text x='50%' y='90%' font-size='${fullSize}' font-family='Poppins,Arial' fill='${base}' font-weight='500' text-anchor='middle'>${full}</text></svg>`;default:return `<svg xmlns='http://www.w3.org/2000/svg' width='130' height='95' viewBox='0 0 130 95'><defs>${gradient}</defs>${embedShield?shieldWide:''}<rect x='1' y='1' width='128' height='93' rx='18' fill='${outerBg||'#f1f5ff'}' stroke='${base}' stroke-width='2'/><rect x='7' y='10' width='116' height='72' rx='14' fill='url(#g)' stroke='${accent}' stroke-width='1.2'/><text x='50%' y='46%' font-size='34' font-family='Poppins,Arial' fill='${base}' font-weight='600' text-anchor='middle' dominant-baseline='middle' letter-spacing='1'>${initials}</text><text x='50%' y='78%' font-size='${fullSize}' font-family='Poppins,Arial' fill='${base}' font-weight='500' text-anchor='middle' style='letter-spacing:.6px;'>${full}</text></svg>`;}}
export function buildAutoLogoDataURI(p:AutoLogoParams){return `data:image/svg+xml;utf8,${encodeURIComponent(generateLogo(p.institutionName||'INSTITUTE',p.logoVariant||0,p.logoBaseColor,p.logoAccentColor,p.logoEmbedShield,p.logoBgOuter,p.logoBgInner,p.logoBgSecondary,p.logoLetters))}`;}
